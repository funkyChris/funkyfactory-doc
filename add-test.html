<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	
	<meta http-equiv="imagetoolbar" content="no" />
	
	<meta name="author" content="Christophe Bouthier" />
	<meta name="copyright" content="copyright 2009 - INRIA" />
	<meta name="keywords" content="Qualipso, qualipso factory, open-source, quality, service, development" />
	<meta name="description" content="Documentation for the Qualiso factory - creation of the test infrastructure" />
	
	<link rel="stylesheet" href="commons/css/style.css" type="text/css" />
	<link rel="stylesheet" href="commons/css/lightbox.css" type="text/css" media="screen" />
	
	<script type="text/javascript" src="commons/js/prototype.js"></script>
  <script type="text/javascript" src="commons/js/scriptaculous.js?load=effects,builder"></script>
  <script type="text/javascript" src="commons/js/lightbox.js"></script>
	
	<title>Qualipso Factory - Tutorial - Part II</title>
</head>
<body id="www.qualipso.org">
	
	<h1>Qualipso Factory</h1>
	
  <div id="wrapper">
  	
	<div id="menu">
	 <div id="menu_global">
  	  <h2>Tutorial map:</h2>
	  	<ol>
	  	  <li><a href="create-new-service.html">Create a new service</a></li>
	  	  <li id="selected"><a href="add-test.html">Add the test structure</a></li>
	  	  <li><a href="EJB.html">Define the EJB service</a></li>
	  	  <li><a href="remote.html">Implements remote access</a></li>
	  	  <li><a href="factory.html">Qualipso Factory services</a></li> 
	    </ol>
	  </div>
	  <div id="menu_local">
		  <h2>Steps:</h2>
		  <ul>
		    <li><a href="#UNIT">Unit testing</a></li>
		    <li><a href="#FUNCTIONAL">Functionnal testing</a></li>
		    <li><a href="#WEBSERVICE">WebService testing</a></li>
	    </ul>
	 </div>
	</div>
	
	<div id="content">
		<h2>Adding the test structure</h2>

		<div id="introduction">
			<p>Before writing a single line of code, you need to have a full set of tests, in order to first code the test, then code the implementation passing this test. For a factory abstract service, there are three level of tests to pass:</p>
			<ul>
			  <li><strong>unit tests</strong>, testing a single method of the service; those tests are integrated in the service project and are run on each build.</li>
			  <li><strong>functional tests</strong>, testing a full functionality of the service, possibly spanning several methods. Those tests applies to a real, deployed service. As such, they require first that the service is built, deployed on a JBoss server, and running, to be able to run. They are run as a real client, in a separated JVM, calling the service remotely. That's why they are in a separated project from the service, as they consists in client code, that don't have to be put on the server. Functional tests are calling the service throught its RMI remote interface (standard remote interface for EJB).</li>
			  <li><strong>web services tests</strong>, testing the web service remote access to the service. Indeed, a factory abstract service provide two kind of remote access: the standard EJB RMI remote access, and a web service SOAP remote access. The RMI access is tested throught the preceding tests, the web service access is tested through those tests.</li>
			</ul>
			<p>On this page, you will see the necessary steps to prepare the infrastructure for the whole three set of tests. Unit tests are done directly in the service project that you already prepared <a href="create-new-service.html">previously</a>, in <em>src/test/java</em>. Functional and web services tests are done in separated projects, that you will create from the existing corresponding projects of the "ClockService" template.</p>
		</div>
		
		<div id="checklist">
		  <h3>Checklist</h3>
		  <p>Here is the checklist of everything that you will do on this level:</p>
		  <ul>
		    <li><a href="#UNIT">Prepare the unit tests</a></li>
        <li><a href="#FUNCTIONAL">Set the functional tests project</a></li>
        <li><a href="#WEBSERVICE">Set the webservice tests project</a></li>
		  </ul>
		</div>
			
    <!-- Unit tests -->
		<div class="step">
		  <h3><a name="UNIT"></a>Step 1: Prepare the unit tests</h3>
			<p>The unit tests are just testing the working of each method of the service. They are run on each build of the service, and are integrated in the service project.  They use the ejb3unit library to test the EJB, and they can use jmock to mock other EJB. They are defined in the <em>TwitterServiceTest.java</em> file, in <em>src/test/java</em>:</p>
			<ol>
			  <li>Open the <em>TwitterServiceTest.java</em> file, in <em>src/test/java</em>, and as always, comment everything, so that you will be able to use it as reference.</li>
			  <li>
			    Create a new Java class, named <kbd>"TwitterServiceTest"</kbd>, that extends the <kbd>"BaseSessionBeanFixture&lt;TwitterServiceBean&gt;"</kbd> class.
			    
			    The <em>BaseSessionBeanFixture</em> class is part of the ejb3unit library. It define a fixture, that is a set of unit tests, that will be run against a specific EJB. This specific EJB (<em>TwitterServiceBean</em> here )is given as parametized type to <em>BaseSessionBeanFixture</em>. This way, ejb3unit will manage the life cycle of the EJB <em>TwitterServiceBean</em> (instanciate, destroy, etc.) and will run each tests against this EJB.
			  </li>
			</ol>
	 </div>
	 
    <!-- Functional tests -->
		<div class="step">
		  <h3><a name="FUNCTIONAL"></a>Step 2: Set the functional tests project</h3>
			<p>taga.</p>
	  </div>
	 
    <!-- Webservice tests -->
		<div class="step">
		  <h3><a name="WEBSERVICE"></a>Step 3: Set the webservice tests project</h3>
			<p>sdf</p>
		</div>


		<div id="conclusion">
			<p>conclusion <a href="suivant.html">lien vers suivant</a>.</p>
		</div>
	</div>
	</div>
	
	<div id="footer">
	  <div id="validation">
      <a class="xhtml" href="http://validator.w3.org/check?uri=referer">xhtml</a>
      <a class="css" href="http://jigsaw.w3.org/css-validator/check/referer">css</a>
    </div>
	</div>

</body>
</html>
